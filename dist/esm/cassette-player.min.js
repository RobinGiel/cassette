!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("@cassette/core"),require("@cassette/components")):"function"==typeof define&&define.amd?define(["react","@cassette/core","@cassette/components"],t):"object"==typeof exports?exports.cassettePlayer=t(require("react"),require("@cassette/core"),require("@cassette/components")):e.cassettePlayer=t(e.React,e.cassetteCore,e.cassetteComponents)}("undefined"!=typeof self?self:this,function(e,t,n){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist",n(n.s=14)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t,n){var r=n(0);function a(e){return r.createElement("svg",e,[r.createElement("path",{d:"M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13c2.75-.63 5.26-1.89 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z",key:0}),r.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,n){var r=n(0);function a(e){return r.createElement("svg",e,[r.createElement("path",{d:"M14 18v12h8l10 10V8L22 18h-8z",key:0}),r.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,n){var r=n(0);function a(e){return r.createElement("svg",e,[r.createElement("path",{d:"M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z",key:0}),r.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,n){var r=n(0);function a(e){return r.createElement("svg",e,[r.createElement("path",{d:"M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z",key:0}),r.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,n){var r=n(0);function a(e){return r.createElement("svg",e,[r.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:0}),r.createElement("path",{d:"M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,n){var r=n(0);function a(e){return r.createElement("svg",e,[r.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:0}),r.createElement("path",{d:"M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8zm-8-4V18h-2l-4 2v2h3v8h3z",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,n){var r=n(0);function a(e){return r.createElement("svg",e,[r.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:0}),r.createElement("path",{d:"M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,n){var r=n(0);function a(e){return r.createElement("svg",e,[r.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:0}),r.createElement("path",{d:"M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,n){var r=n(0);function a(e){return r.createElement("svg",e,[r.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:0}),r.createElement("path",{d:"M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(1),s=n(2);function l(e){return e&&"object"==typeof e?Object.keys(e).filter(t=>e[t]).join(" "):e}var i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map(l).filter(Boolean).join(" ")};function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=Object(r.forwardRef)((e,t)=>{let n=e.className,r=e.children,o=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["className","children"]);return a.a.createElement("div",c({ref:t,className:i("cassette__media_button_wrapper",n)},o),r)});var d=Object(o.playerContextFilter)(class extends r.PureComponent{render(){const e=this.props,t=e.paused,n=e.awaitingPlayResume,r=e.activeTrackIndex,o=e.onTogglePause,s=e.onSelectTrackIndex,l=e.trackIndex,c=void 0===l?r:l,d=r===c;return a.a.createElement(u,null,a.a.createElement("button",{type:"button",className:i("cassette__play_pause_button cassette__media_button",{playing:d&&(!t||n)}),onClick:d?o:()=>s(c)},a.a.createElement("div",{className:"foreground"},a.a.createElement("div",{className:"left"}),a.a.createElement("div",{className:"right"}))))}},["paused","awaitingPlayResume","activeTrackIndex","onTogglePause","onSelectTrackIndex"]);var p=class extends r.PureComponent{render(){const e=this.props,t=e.back,n=e.onClick;return a.a.createElement(u,null,a.a.createElement("button",{type:"button",className:i("cassette__skip_button cassette__media_button",{back:t}),onClick:n},a.a.createElement("div",{className:"skip_button_inner foreground"},a.a.createElement("div",{className:"right_facing_triangle"}),a.a.createElement("div",{className:"right_facing_triangle"}),a.a.createElement("div",{className:"vertical_bar"}))))}};var m=Object(o.playerContextFilter)(class extends r.PureComponent{render(){return a.a.createElement(p,{back:!0,onClick:this.props.onBackSkip})}},["onBackSkip"]);var h=Object(o.playerContextFilter)(class extends r.PureComponent{render(){return a.a.createElement(p,{onClick:this.props.onForwardSkip})}},["onForwardSkip"]),f=n(3),v=n.n(f),g=n(4),y=n.n(g),_=n(5),E=n.n(_),b=n(6),x=n.n(b);var P=function(e,t){return t?v.a:0===e?y.a:e<=.5?E.a:x.a};var C=function(e){switch(e){case"rightabove":case"rightbelow":return"right";case"hiddenup":case"upabove":default:return"up"}};var k=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()};const T={touchAction:"none"};var M=Object(o.playerContextFilter)(class extends r.PureComponent{static getDerivedStateFromProps(e,t){const n=t.hover;return!t.volumeBarPosition||n||e.setVolumeInProgress?null:{volumeBarPosition:null}}constructor(e){super(e),this.state={hover:!1,volumeBarPosition:null},this.volumeControlRef=null,this.muteToggleRef=null,this.volumeBarContainerRef=null,this.setVolumeControlRef=this.setVolumeControlRef.bind(this),this.setMuteToggleRef=this.setMuteToggleRef.bind(this),this.setVolumeBarContainerRef=this.setVolumeBarContainerRef.bind(this),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.handleMuteToggleTouchStart=this.handleMuteToggleTouchStart.bind(this)}componentDidMount(){this.muteToggleRef.addEventListener("touchstart",this.handleMuteToggleTouchStart),document.addEventListener("touchstart",this.handleMouseLeave)}componentDidUpdate(){const e=this.state.volumeBarPosition;if("hiddenup"===e||"hiddenright"===e){const t=this.volumeControlRef.getBoundingClientRect(),n=t.top,r=this.volumeBarContainerRef.offsetHeight;let a;a="hiddenup"===e?r<=n?"upabove":"hiddenright":r<=n?"rightabove":r<=document.documentElement.clientHeight-t.bottom?"rightbelow":null,this.setState({volumeBarPosition:a})}}componentWillUnmount(){this.muteToggleRef.removeEventListener("touchstart",this.handleMuteToggleTouchStart),document.removeEventListener("touchstart",this.handleMouseLeave)}setVolumeControlRef(e){this.volumeControlRef=e}setMuteToggleRef(e){this.muteToggleRef=e}setVolumeBarContainerRef(e){this.volumeBarContainerRef=e}handleMouseEnter(){this.setState({hover:!0,volumeBarPosition:this.state.volumeBarPosition||"hiddenup"})}handleMouseLeave(){this.setState({hover:!1,volumeBarPosition:this.props.setVolumeInProgress?this.state.volumeBarPosition:null})}handleMuteToggleTouchStart(e){this.state.hover||(e.preventDefault(),this.handleMouseEnter())}renderHandle(){return a.a.createElement("div",{className:i("handle",{highlight:this.props.setVolumeInProgress})},a.a.createElement("div",null))}render(){const e=this.props,t=e.volume,n=e.muted,r=e.onSetVolume,o=e.onSetVolumeComplete,l=e.onToggleMuted,c=this.state,d=c.hover,p=c.volumeBarPosition,m=P(t,n);return a.a.createElement(u,{ref:this.setVolumeControlRef,className:"cassette__volume_control",style:T,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTouchStart:k},a.a.createElement("button",{ref:this.setMuteToggleRef,type:"button",className:i("cassette__material_toggle cassette__media_button cassette__mute_btn",{highlight:d,on:!n}),onClick:l},a.a.createElement("div",{className:"foreground inner"},a.a.createElement(m,{width:"100%",height:"100%"}))),a.a.createElement("div",{hidden:!p,ref:this.setVolumeBarContainerRef,className:i("cassette__volume_control__volume_bar_container",p)},a.a.createElement(s.ProgressBar,{className:i("cassette__volume_control__volume_bar",p),progressClassName:"volume",progress:n?0:t,progressDirection:C(p),handle:this.renderHandle(),onAdjustProgress:r,onAdjustComplete:o})))}},["volume","muted","setVolumeInProgress","onSetVolume","onSetVolumeComplete","onToggleMuted"]);var w=Object(o.playerContextFilter)(class extends r.PureComponent{render(){const e=this.props,t=e.volume,n=e.muted,r=e.onToggleMuted,o=P(t,n);return a.a.createElement(u,null,a.a.createElement("button",{type:"button",className:i("cassette__material_toggle cassette__media_button cassette__mute_btn",{on:!n}),onClick:r},a.a.createElement("div",{className:"foreground inner"},a.a.createElement(o,{width:"100%",height:"100%"}))))}},["volume","muted","onToggleMuted"]),S=n(7),N=n.n(S),V=n(8),B=n.n(V);var O=Object(o.playerContextFilter)(class extends r.PureComponent{constructor(e){super(e),this.handleNextRepeatStrategy=this.handleNextRepeatStrategy.bind(this)}handleNextRepeatStrategy(){this.props.onSetRepeatStrategy(function(e){let t=o.repeatStrategyOptions.indexOf(e)+1;return t>=o.repeatStrategyOptions.length&&(t=0),o.repeatStrategyOptions[t]}(this.props.repeatStrategy))}render(){const e=this.props.repeatStrategy,t="track"===e?B.a:N.a;return a.a.createElement(u,null,a.a.createElement("button",{type:"button",className:i("cassette__material_toggle cassette__media_button cassette__repeat_btn",{on:"none"!==e}),onClick:this.handleNextRepeatStrategy},a.a.createElement("div",{className:"inner foreground"},a.a.createElement(t,{width:"100%",height:"100%"}))))}},["repeatStrategy","onSetRepeatStrategy"]),j=n(9),z=n.n(j);var R=Object(o.playerContextFilter)(class extends r.PureComponent{render(){const e=this.props,t=e.shuffle,n=e.onToggleShuffle;return a.a.createElement(u,null,a.a.createElement("button",{type:"button",className:i("cassette__material_toggle cassette__media_button cassette__shuffle_btn",{on:t}),onClick:n},a.a.createElement("div",{className:"inner foreground"},a.a.createElement(z.a,{width:"100%",height:"100%"}))))}},["shuffle","onToggleShuffle"]);var D=class extends r.PureComponent{render(){const e=this.props,t=e.style,n=e.displayText,r=e.displayTime;return a.a.createElement("div",{className:"cassette__media_status_bar",style:t},a.a.createElement("div",{className:"cassette__media_info_marquee"},a.a.createElement(s.MaybeMarquee,{content:n})),a.a.createElement("div",{className:"cassette__media_time_progress"},r))}};var H=function(e){const t=Math.floor(e/60),n=(e%60).toFixed();return`${t<10?"0":""}${t}:${n<10?"0":""}${n}`};const F={pointerEvents:"none"};class L extends r.PureComponent{render(){const e=this.props,t=e.playlist,n=e.activeTrackIndex,r=e.currentTime,o=e.seekPreviewTime,l=e.seekInProgress,i=e.duration,c=e.getDisplayText,u=l?o:r;return a.a.createElement("div",{className:"cassette__media_progress_container"},a.a.createElement(s.MediaProgressBar,{className:"cassette__media_progress_bar",progressClassName:"progress",progressDirection:"right"}),a.a.createElement(D,{style:F,displayText:c(t[n])||"",displayTime:`${H(u)} / ${H(i)}`}))}}L.defaultProps={getDisplayText:o.getDisplayText};var I=Object(o.playerContextFilter)(L,["playlist","activeTrackIndex","currentTime","seekPreviewTime","seekInProgress","duration"]);class q extends r.PureComponent{render(){const e=this.props,t=e.playlist,n=e.activeTrackIndex,r=e.currentTime,o=e.duration,l=e.getDisplayText;return a.a.createElement("div",{className:"cassette__media_progress_container"},a.a.createElement(s.MediaProgressBarDisplay,{className:"cassette__media_progress_bar",progressClassName:"progress",progressDirection:"right"}),a.a.createElement(D,{displayText:l(t[n])||"",displayTime:`${H(r)} / ${H(o)}`}))}}q.defaultProps={getDisplayText:o.getDisplayText};var $=Object(o.playerContextFilter)(q,["playlist","activeTrackIndex","currentTime","duration"]),K=n(10),A=n.n(K),U=n(11),W=n.n(U);var G=Object(o.playerContextFilter)(class extends r.PureComponent{render(){const e=this.props,t=e.fullscreen,n=e.requestFullscreen,r=e.requestExitFullscreen,o=t?W.a:A.a;return a.a.createElement(u,null,a.a.createElement("button",{type:"button",className:i("cassette__material_toggle cassette__media_button cassette__fullscreen_btn",{on:t}),onClick:t?r:n},a.a.createElement("div",{className:"inner foreground"},a.a.createElement(o,{width:"100%",height:"100%"}))))}},["fullscreen","requestFullscreen","requestExitFullscreen"]);var J=class extends r.PureComponent{render(){return a.a.createElement(u,null,a.a.createElement("div",{className:"cassette__spacer"}))}};const Q={playpause:d,backskip:m,forwardskip:h,volume:M,mute:w,repeat:O,shuffle:R,progress:I,progressdisplay:$,fullscreen:G,spacer:J};const X={};var Y=function(e){if("function"==typeof e)return e;if("string"==typeof e){if(X[e])return X[e];const t=function(e){const t=Q[e];if(!t)return null;switch(e){case"progress":case"progressdisplay":return(e,n,a)=>{let o=a.getDisplayText;return Object(r.createElement)(t,{getDisplayText:o})};default:return()=>Object(r.createElement)(t)}}(e);return X[e]=t,t}return null};n(12);let Z=0;class ee extends r.Component{getKeyedChildren(e){this.controlKeys=this.controlKeys||new Map;const t=new Map;return e.map(e=>{if(!e)return e;const n=e.type||e.nodeName||e.tag||"",r=t.get(n)||0;t.set(n,r+1);const o=this.controlKeys.get(n)||[];let s;return o[r]?s=o[r]:(s=(Z++).toString(),this.controlKeys.set(n,o.concat(s))),a.a.cloneElement(e,{key:s})})}render(){const e=this.props,t=e.getDisplayText,n=e.controls,r=e.showVideo,s=e.renderVideoDisplay;return a.a.createElement(o.FullscreenContextConsumer,null,e=>a.a.createElement(o.donotuse_PlayerContext.Consumer,null,o=>a.a.createElement("div",{className:"cassette"},r&&s(o,e),a.a.createElement("div",{className:"cassette__control_bar",title:t(o.playlist[o.activeTrackIndex])},this.getKeyedChildren(n.map(n=>{const r=Y(n);return r&&r(o,e,{getDisplayText:t})}))))))}}ee.defaultProps={controls:["spacer","backskip","playpause","forwardskip","spacer","progress"],getDisplayText:o.getDisplayText,showVideo:!1,renderVideoDisplay:(e,t)=>a.a.createElement(s.VideoDisplay,{className:"cassette__video_display_container",onClick:e.onTogglePause})};var te=ee;function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class re extends r.Component{render(){const e=this.props,t=e.getDisplayText,n=e.controls,r=e.showVideo,s=e.renderVideoDisplay,l=e.fullscreenEnabled,i=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["getDisplayText","controls","showVideo","renderVideoDisplay","fullscreenEnabled"]);return a.a.createElement(o.FullscreenContextProvider,{fullscreenEnabled:l},a.a.createElement(o.PlayerContextProvider,i,a.a.createElement(te,{getDisplayText:t,controls:n,showVideo:r,renderVideoDisplay:s})))}}delete re.propTypes.children,re.defaultProps=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ne(e,t,n[t])})}return e}({},o.PlayerContextProvider.defaultProps,te.defaultProps,o.FullscreenContextProvider.defaultProps),delete re.defaultProps.children;var ae=re;n.d(t,"MediaPlayer",function(){return ae}),n.d(t,"MediaPlayerControls",function(){return te}),n.d(t,"PlayPauseButton",function(){return d}),n.d(t,"BackSkipButton",function(){return m}),n.d(t,"ForwardSkipButton",function(){return h}),n.d(t,"VolumeControl",function(){return M}),n.d(t,"MuteButton",function(){return w}),n.d(t,"RepeatButton",function(){return O}),n.d(t,"ShuffleButton",function(){return R}),n.d(t,"FullscreenButton",function(){return G}),n.d(t,"MediaProgress",function(){return I}),n.d(t,"MediaProgressDisplay",function(){return $}),n.d(t,"Spacer",function(){return J})}])});
//# sourceMappingURL=cassette-player.min.js.map